<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pego, Entrego/Carona ğŸš—ğŸ“¦</title>
<style>
:root{
  --blue:#0a6cff;
  --green:#00c48c;
  --bgPublic:linear-gradient(135deg,#0a6cff,#00c48c);
  --bgPrivate:linear-gradient(135deg,#e8fff6,#eef5ff);
  --btnColor:#0a6cff;
  --btnAlt:#eee;
}
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;}
body{margin:0;background:#f4f7fb;}
header{padding:16px;text-align:center;color:white;font-weight:bold;font-size:24px;background:linear-gradient(90deg,var(--blue),var(--green));}
main{padding:16px;}

/* BotÃµes */
button{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:none;font-size:16px;background:var(--btnColor);color:#fff;cursor:pointer;transition:0.3s;}
button:hover{opacity:0.85;}
button.alt{background:var(--btnAlt);color:#333;}

/* Cards */
.card{background:#fff;border-radius:16px;padding:16px;margin-bottom:12px;box-shadow:0 4px 12px rgba(0,0,0,.08);}
.hidden{display:none;}
.big button{padding:16px;font-size:18px;}

/* Labels */
label{display:flex;align-items:center;gap:8px;margin-top:8px;}

/* PÃºblicos */
#publicArea{background:var(--bgPublic);color:white;display:flex;flex-direction:column;align-items:center;gap:16px;padding:24px;border-radius:16px;}
#publicArea h3{margin:8px 0;}
#publicArea .balloon{background:rgba(255,255,255,0.1);padding:12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.2);width:90%;text-align:center;}

/* Privado */
#private{background:var(--bgPrivate);}
#private header{background:#00b362;font-weight:bold;color:white;padding:12px;text-align:center;border-radius:8px;margin-bottom:12px;}

/* Inputs */
input{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:1px solid #ccc;font-size:16px;}

/* Map */
#map{width:100%;height:300px;margin:8px 0;border-radius:12px;}
</style>
</head>
<body>

<header>Pego, Entrego/Carona ğŸš—ğŸ“¦</header>

<main>

<!-- Ãrea PÃºblica -->
<div id="publicArea">
  <h3>Seja Bem-vindo ao Pego, Entrego/Carona!</h3>
  <div class="balloon">
    <h4>Quem somos nÃ³s ğŸŒŸ</h4>
    <p>Somos uma plataforma criada para aproximar pessoas que precisam se locomover ou enviar algo, com quem jÃ¡ vai passar pelo mesmo caminho.</p>
  </div>
  <div class="balloon">
    <h4>Nossa finalidade ğŸ¯</h4>
    <p>Ajudar vocÃª a economizar, ganhar dinheiro e criar conexÃµes reais. Aqui vocÃª pode pedir ou oferecer caronas e enviar encomendas.</p>
  </div>
  <button onclick="show('register')">Criar Conta</button>
  <button class="alt" onclick="show('login')">Entrar</button>
</div>

<!-- Registro -->
<div id="register" class="card hidden">
  <h3>Criar Conta ğŸ“</h3>
  <input id="rName" placeholder="Nome completo">
  <input id="rPhone" placeholder="Telefone (11 dÃ­gitos)">
  <input id="rStreet" placeholder="Rua">
  <input id="rNumber" placeholder="NÃºmero">
  <input id="rDistrict" placeholder="Bairro">
  <input id="rCity" placeholder="Cidade">
  <input id="rEmail" placeholder="E-mail">
  <input id="rPass" type="password" placeholder="Senha">
  <input id="rPass2" type="password" placeholder="Confirmar senha">
  <button onclick="registerUser()">Criar e Entrar</button>
  <button class="alt" onclick="back()">Voltar</button>
</div>

<!-- Login -->
<div id="login" class="card hidden">
  <h3>Entrar ğŸ”</h3>
  <input id="lEmail" placeholder="E-mail">
  <input id="lPass" type="password" placeholder="Senha">
  <button onclick="loginUser()">Entrar</button>
  <button class="alt" onclick="alert('RecuperaÃ§Ã£o de senha em breve ğŸ“§')">Esqueci minha senha</button>
  <button class="alt" onclick="back()">Voltar</button>
</div>

<!-- Perfil Privado -->
<div id="private" class="card hidden big">
  <header>Seu Perfil ğŸ‘¤</header>
  <p><b id="userName"></b></p>
  <p id="userAddress"></p>
  <p id="userCar"></p>

  <!-- Publicar Carona -->
  <h4>Oferecer Carona ğŸš—</h4>
  <input id="routeFrom" placeholder="Cidade de origem">
  <input id="routeTo" placeholder="Cidade de destino">
  <input id="intermediateCities" placeholder="Cidades intermediÃ¡rias (separadas por vÃ­rgula)">
  <input id="departureTime" type="time" placeholder="HorÃ¡rio de partida">
  <div id="map"></div>
  <button onclick="publishRide()">Publicar Carona</button>

  <!-- Publicar Entrega -->
  <h4>Oferecer Entrega ğŸ“¦</h4>
  <input id="deliveryFrom" placeholder="Cidade de origem">
  <input id="deliveryTo" placeholder="Cidade de destino">
  <button onclick="publishDelivery()">Publicar Entrega</button>

  <h4>Caronas e Entregas DisponÃ­veis</h4>
  <div id="ridesAvailable"></div>
  <div id="deliveriesAvailable"></div>

  <button class="alt" onclick="logout()">Sair</button>
</div>

</main>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4I5hgGgHpYTS4izGr4KvZhklT2a4HL5c&libraries=places"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDGU_N1Un8Eo5DuaVbI4vru63ox_tSBR1o",
  authDomain: "pego-entrego-c3010.firebaseapp.com",
  projectId: "pego-entrego-c3010",
  storageBucket: "pego-entrego-c3010.appspot.com",
  messagingSenderId: "118361704352",
  appId: "1:118361704352:web:4a714264d54169a6dc46c5"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Elementos
const publicArea = document.getElementById('publicArea');
const register = document.getElementById('register');
const login = document.getElementById('login');
const privateArea = document.getElementById('private');
const userName = document.getElementById('userName');
const userAddress = document.getElementById('userAddress');
const userCar = document.getElementById('userCar');

// Mostrar tela
function show(id){
  publicArea.classList.add('hidden');
  register.classList.add('hidden');
  login.classList.add('hidden');
  document.getElementById(id).classList.remove('hidden');
}

function back(){
  register.classList.add('hidden');
  login.classList.add('hidden');
  publicArea.classList.remove('hidden');
}

// Cadastro/Login (localStorage para teste)
function registerUser(){
  const user = {
    name: rName.value,
    phone: rPhone.value,
    street: rStreet.value,
    number: rNumber.value,
    district: rDistrict.value,
    city: rCity.value,
    email: rEmail.value,
    pass: rPass.value
  };
  localStorage.setItem("user", JSON.stringify(user));
  enter(user);
}

function loginUser(){
  const data = JSON.parse(localStorage.getItem("user"));
  if(!data){alert("Nenhuma conta encontrada"); return;}
  if(lEmail.value!==data.email || lPass.value!==data.pass){alert("E-mail ou senha incorretos"); return;}
  enter(data);
}

function enter(user){
  publicArea.classList.add('hidden');
  register.classList.add('hidden');
  login.classList.add('hidden');
  privateArea.classList.remove('hidden');
  userName.textContent = user.name;
  userAddress.textContent = `${user.street}, ${user.number} - ${user.district} / ${user.city}`;
  userCar.textContent = user.car?`ğŸš— ${user.car.name} - ${user.car.brand} (${user.car.color})`:'';
}

// Logout
function logout(){
  privateArea.classList.add('hidden');
  publicArea.classList.remove('hidden');
}

// Mapa
let map, directionsService, directionsRenderer;
function initMap(){
  map = new google.maps.Map(document.getElementById("map"), {zoom:5, center:{lat:-23.5489,lng:-46.6388}});
  directionsService = new google.maps.DirectionsService();
  directionsRenderer = new google.maps.DirectionsRenderer({map:map});
}
window.onload = initMap;

// Publicar Carona (simulaÃ§Ã£o)
function publishRide(){
  const from = routeFrom.value;
  const to = routeTo.value;
  const intermediates = intermediateCities.value.split(',').map(c=>c.trim()).filter(c=>c);
  const time = departureTime.value;
  const ride = {from,to,intermediates,time,user:userName.textContent};
  db.ref('rides').push(ride);
  alert('Carona publicada âœ…');
  updateRides();
  drawRoute(from,to,intermediates);
}

// Publicar Entrega (simulaÃ§Ã£o)
function publishDelivery(){
  const from = deliveryFrom.value;
  const to = deliveryTo.value;
  const delivery = {from,to,user:userName.textContent};
  db.ref('deliveries').push(delivery);
  alert('Entrega publicada âœ…');
  updateDeliveries();
}

// Atualiza caronas/entregas
function updateRides(){
  const container = document.getElementById('ridesAvailable');
  container.innerHTML='';
  db.ref('rides').once('value',snap=>{
    snap.forEach(r=>{
      const val = r.val();
      container.innerHTML += `<div class="card"><b>${val.user}</b> - ${val.from} â¡ ${val.to} - ${val.time}</div>`;
    });
  });
}

function updateDeliveries(){
  const container = document.getElementById('deliveriesAvailable');
  container.innerHTML='';
  db.ref('deliveries').once('value',snap=>{
    snap.forEach(d=>{
      const val = d.val();
      container.innerHTML += `<div class="card"><b>${val.user}</b> - ${val.from} â¡ ${val.to}</div>`;
    });
  });
}

// Rota no mapa
function drawRoute(from,to,intermediates){
  const waypts = intermediates.map(c=>({location:c,stopover:true}));
  directionsService.route({origin:from,destination:to,waypoints:waypts,travelMode:'DRIVING'},(res,status)=>{
    if(status==='OK'){directionsRenderer.setDirections(res);}else{alert('NÃ£o foi possÃ­vel traÃ§ar rota');}
  });
}
</script>
</body>
</html>
